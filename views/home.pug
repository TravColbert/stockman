extends index.pug

block content
  //- .section-hdg.section-hdg-1 Parts (#{parts.length})
  if(!account)
    .section-hdg.section-hdg-1 Dashboard
  else
    .section-hdg.section-hdg-1 #{account}'s Dashboard
  div Hi #{account}!
  if(yourCases)
    div Here is a list of all of the cases that you own. There are #{cases.length} of them:
    //- .section-hdg.section-hdg-3 Your Cases (#{cases.length})
    ul.itemlist
      each item in yourCases
        - let targetLoc = "/case/" + item.id;
        - let dateTime = new Date(item.time).toLocaleDateString() + " " + new Date(item.time).toLocaleTimeString();
        - let ageMs = Date.now()-parseInt(item.time);
        - let ageDays = Math.round((ageMs/(1000*60*60*24)));
        li.layout-col(onclick="goTo('" + targetLoc + "')")
          .itemhead Case: #{item.id}
          .itemdetail.layout-col
            .label Days Old:
            .data #{ageDays}
          .itemdetail.layout-col
            .label Create Date/Time:
            .data #{dateTime}
    div To see other cases click <a href="">here</a> or use the menu above.

  div Here is a list of the oldest opened cases. There are #{cases.length} of them. The ones that have already been closed do not appear on this list.
  //- .section-hdg.section-hdg-3 Oldest Cases (#{cases.length})
  .item-listing.layout-row
    .itemsidebar.layout-col.layout-width-1-8
      i.material-icons.item-icon update
    .itemcontent.layout-col.layout-width-7-8
      each item in oldestCases
        - let targetLoc = "/case/" + item.id;
        - let dateTime = new Date(item.time).toLocaleDateString() + " " + new Date(item.time).toLocaleTimeString();
        - let ageMs = Date.now()-parseInt(item.time);
        - let ageDays = Math.round((ageMs/(1000*60*60*24)));
        .itemhead Case: #{item.id}
        .itemdetail.layout-col
          .label Days Old:
          .data #{ageDays}
        .itemdetail.layout-col
          .label Create Date/Time:
          .data #{dateTime}
        .itemdetail.layout-col
          .label Owner:
          .data #{item.owner}
  
  //- ul.itemlist
  //-   each item in oldestCases
  //-     - let targetLoc = "/case/" + item.id;
  //-     - let dateTime = new Date(item.time).toLocaleDateString() + " " + new Date(item.time).toLocaleTimeString();
  //-     - let ageMs = Date.now()-parseInt(item.time);
  //-     - let ageDays = Math.round((ageMs/(1000*60*60*24)));
  //-     .item-listing.layout-row
  //-       .itemsidebar.layout-col.layout-width-1-8
  //-         i.material-icons.item-icon update
  //-       .itemcontent.layout-col.layout-width-7-8
  //-         .itemhead Case: #{item.id}
  //-         .itemdetail.layout-col
  //-           .label Days Old:
  //-           .data #{ageDays}
  //-         .itemdetail.layout-col
  //-           .label Create Date/Time:
  //-           .data #{dateTime}
  //-         .itemdetail.layout-col
  //-           .label Owner:
  //-           .data #{item.owner}
      //- li.layout-row(onclick="goTo('" + targetLoc + "')")
  //- .section-hdg.section-hdg-3 Cases Consuming the Most Parts (#{cases.length})
